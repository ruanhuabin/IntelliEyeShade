package action;

import java.io.File;
import java.io.FileInputStream;
import java.io.InputStream;
import java.util.logging.Logger;

import org.apache.struts2.ServletActionContext;

import com.opensymphony.xwork2.ActionSupport;

public class DownloadAction extends SuperAction {
	
	private String inputPath;
	private String uploadDir;
	

	
	public String getUploadDir() {
		return uploadDir;
	}

	public void setUploadDir(String uploadDir) {
		this.uploadDir = uploadDir;
	}


	private static final Logger logger = Logger.getLogger("MyLogger");

	public String getInputPath() {
		return inputPath;
	}

	public void setInputPath(String inputPath) {
		this.inputPath = inputPath;
	}
	
	
	public InputStream getTargetFile() throws Exception
	{

		String fileName = request.getParameter("f");
		logger.info("fileName = " + fileName);
		
		String uploadDir = ServletActionContext.getServletContext().getRealPath(this.uploadDir);
		
		String filePath = uploadDir + "/" + fileName;
		
		logger.info("filePath = " + filePath);
		
		return ServletActionContext.getServletContext().getResourceAsStream(filePath);
	}
	
	
	public String execute()
	{
		return SUCCESS;
	}

}
